<h1>Partidos</h1>

<!-- Botón para abrir el diálogo -->
<p-button 
  label="Nuevo Partido" 
  icon="pi pi-plus" 
  class="mb-3" 
  (onClick)="abrirDialogo()">
</p-button>

<!-- Tabla de partidos -->
<p-table [value]="partidos" [tableStyle]="{ 'min-width': '60rem' }">
  <ng-template pTemplate="header">
    <tr>
      <th style="width:10%">ID</th>
      <th style="width:20%">ADMINISTRADOR</th>
      <th style="width:20%">NOMBRE</th>
      <th style="width:15%">LUGAR</th>
      <th style="width:15%">FECHA</th>
      <th style="width:10%">HORA</th>
      <th style="width:10%">RESULTADO</th>
      <th style="width:10%">OPCIONES</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-partido>
    <tr>
      <td>{{ partido.id }}</td>
      <td>{{ partido.administrador?.nombre_usuario }}</td>
      <td>{{ partido.nombre_partido }}</td>
      <td>{{ partido.lugar_partido }}</td>
      <td>{{ partido.fecha_partido }}</td>
      <td>{{ partido.hora_partido }}</td>
      <td>{{ partido.resultado }}</td>
      <td>
        <div class="flex items-center justify-center gap-2">
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-pencil"
            (click)="editarPartido(partido)"
            text
            rounded
            severity="secondary"
            title="Editar partido"
          ></button>
          <button
            pButton
            pRipple
            type="button"
            icon="pi pi-trash"
            (click)="eliminarPartido(partido)"
            text
            rounded
            severity="secondary"
            title="Eliminar partido"
          ></button>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>

<!-- Diálogo para crear/editar -->
<p-dialog header="Crear/Editar Partido" [(visible)]="visible" [modal]="true" [style]="{ width: '30rem' }">
  <div class="flex items-center gap-4 mb-3">
    <label for="administrador" class="font-semibold w-32">Administrador</label>
    <p-dropdown 
      id="administrador" 
      [options]="administradores" 
      [(ngModel)]="administradorSeleccionado" 
      optionLabel="nombre_usuario" 
      placeholder="Seleccione un administrador" 
      class="w-full" />
  </div>

  <div class="flex items-center gap-4 mb-3">
    <label for="nombre" class="font-semibold w-32">Nombre</label>
    <input pInputText id="nombre" class="flex-auto" [(ngModel)]="partidoDialogo.nombre_partido" />
  </div>

  <div class="flex items-center gap-4 mb-3">
    <label for="lugar" class="font-semibold w-32">Lugar</label>
    <input pInputText id="lugar" class="flex-auto" [(ngModel)]="partidoDialogo.lugar_partido" />
  </div>

  <div class="flex items-center gap-4 mb-3">
    <label for="fecha" class="font-semibold w-32">Fecha</label>
    <input type="date" pInputText id="fecha" class="flex-auto" [(ngModel)]="partidoDialogo.fecha_partido" />
  </div>

  <div class="flex items-center gap-4 mb-3">
    <label for="hora" class="font-semibold w-32">Hora</label>
    <input type="time" pInputText id="hora" class="flex-auto" [(ngModel)]="partidoDialogo.hora_partido" />
  </div>

  <div class="flex items-center gap-4 mb-3">
    <label for="resultado" class="font-semibold w-32">Resultado</label>
    <input pInputText id="resultado" class="flex-auto" [(ngModel)]="partidoDialogo.resultado" />
  </div>

  <div class="flex justify-end gap-2 mt-4">
    <p-button label="Cancelar" severity="secondary" (click)="visible = false" />
    <p-button label="Guardar" (click)="guardarPartido()" />
  </div>
</p-dialog>
